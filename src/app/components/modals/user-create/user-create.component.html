<!-- ======================================== -->
<!-- MODAL: CRIAR USUÁRIO -->
<!-- ======================================== -->
<div
  class="bg-white w-[605px] h-[382px] rounded-[10px] shadow-[0_0_15px_5px_rgba(0,0,0,0.05)] pl-[14px] pr-[20px]"
>
  <!-- Header do modal com título dinâmico e botão de fechar -->
  <div class="flex items-center justify-between pt-4 pb-[22px]">
    <h2 class="font-tommy-bold text-sm text-[#8A8A8A]">
      {{ modalOptions.title }}
    </h2>

    <svg
      (click)="onClose()"
      class="size-4 stroke-[3] stroke-current text-[#8A8A8A] cursor-pointer">
      <use href="#x-mark" />
    </svg>
  </div>

  <!-- Formulário de criação de usuário -->
  <form [formGroup]="form" (ngSubmit)="createUser()">
    <!-- Campos principais do usuário -->
    <div class="flex flex-col gap-[10px] pb-[14px]">
      <!-- Campo: Nome do Usuário (Login) -->
      <ion-item
        class="batutta-input flex items-center min-h-[50px]"
        lines="none"
        class="box-border w-full h-[50px] bg-[#FAFAFA] border border-[#D6D6D6] rounded-[10px] text-[#C2C2C2] text-[16px] flex items-center justify-center !min-h-[50px] font-normal"
      >
        <ion-input
          formControlName="username"
          type="text"
          label="Nome do Usuário (Login)"
          labelPlacement="floating"
          placeholder=""
          class="py-2"
        >
        </ion-input>
      </ion-item>

      <!-- Campo: Nome do Colaborador -->
      <ion-item
        class="batutta-input flex items-center min-h-[50px]"
        lines="none"
        class="box-border w-full h-[50px] bg-[#FAFAFA] border border-[#D6D6D6] rounded-[10px] text-[#C2C2C2] text-[16px] flex items-center justify-center !min-h-[50px] font-normal"
      >
        <ion-input
          formControlName="collaboratorName"
          type="text"
          label="Nome do Colaborador"
          labelPlacement="floating"
          placeholder=""
          class="py-2"
        >
        </ion-input>
      </ion-item>
    </div>

    <!-- Seção de permissões do usuário -->
    <div class="text-[10px] text-[#C2C2C2] font-tommy-bold">
      PERMISSÕES DO USUÁRIO
    </div>

    <!-- Lista dinâmica de módulos e permissões -->
    <div class="flex flex-col gap-[.38rem] pt-1">
      @for (permission of permissions; track $index) {
      <div
        class="h-[50px] bg-[#EFEFEF] rounded-[10px] px-2 py-0"
        style="position: relative"
      >
        <!-- Nome do módulo -->
        <span class="text-[#393939] text-[10px] font-tommy-bold">
          Módulo: {{ permission.module }}
        </span>

        <!-- Botões de acesso e edição -->
        <div class="flex gap-2 mt-0">
          <!-- Botão: Acessar -->
          <button
            type="button"
            class="w-[74px] h-[20px] text-[10px] font-tommy-bold rounded-[5px] flex items-center justify-center gap-2 cursor-pointer"
            [ngClass]="permission.access ? 'bg-[#2BAA00] text-white' : 'bg-[#D3D3D3] text-[#393939]'"
            (click)="togglePermission(permission, 'access')">
            ACESSAR
            <svg class="w-[12px] h-[12px]" [ngClass]="permission.access ? 'fill-white' : 'fill-[#393939]'">
              <use href="#lock-open-solid" />
            </svg>
          </button>

          <!-- Botão: Editar -->
          <button
            type="button"
            class="w-[57px] h-[20px] font-tommy-bold rounded-[5px] flex items-center justify-center gap-1 cursor-pointer"
            [ngClass]="permission.edit ? 'bg-[#2BAA00] text-white' : 'bg-[#D3D3D3] text-[#393939]'"
            (click)="togglePermission(permission, 'edit')">
            <div class="text-[10px]">EDITAR</div>
            <svg class="w-[8px] h-[10px]" [ngClass]="permission.edit ? 'fill-white' : 'fill-[#393939]'">
              <use href="#lock-closed-solid" />
            </svg>
          </button>
        </div>
      </div>
      }
    </div>

    <!-- Botão para criar usuário -->
    <button
      type="submit"
      class="absolute bottom-[24px] right-[24px] w-[116px] h-[30px] bg-[#393939] text-white text-[12px] font-tommy-bold rounded-[5px] flex items-center justify-center gap-2 mr-[2px]"
    >
      <!-- Ícone de adicionar -->
      <svg class="w-[18px] h-[18px] fill-white">
        <use href="#plus-circle" />
      </svg>
      Criar Usuário
    </button>
  </form>
</div>
